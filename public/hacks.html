<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –•–∞–∫–∏</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="scripts.js"></script>
</head>
<body>
    <div class="container">
        <h1>üìå –ú–æ–∏ –•–∞–∫–∏</h1>
        
        <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ö–∞–∫–∞ -->
        <div class="hack-input">
            <input type="text" id="hackDescription" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ö–∞–∫–∞">
            <input type="datetime-local" id="hackDeadline">
            <button onclick="addHack()">–î–æ–±–∞–≤–∏—Ç—å –•–∞–∫</button>
        </div>

        <!-- –†–∞–∑–¥–µ–ª —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Ö–∞–∫–∞–º–∏ -->
        <h2>‚è≥ –ê–∫—Ç–∏–≤–Ω—ã–µ –•–∞–∫–∏</h2>
        <div id="activeHacks"></div>
        
        <button onclick="goBack()">‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadHacks();
        });

        function addHack() {
            let description = document.getElementById("hackDescription").value.trim();
            let deadline = document.getElementById("hackDeadline").value;

            if (!description) {
                alert("–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ö–∞–∫–∞!");
                return;
            }

            if (!deadline) {
                alert("–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è!");
                return;
            }

            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–≤–µ–¥–µ–Ω–Ω–æ–π –¥–∞—Ç—ã –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
            let selectedTime = new Date(deadline).getTime();
            let currentTime = Date.now();

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ –ø—Ä–æ—à–ª–æ–º
            if (selectedTime <= currentTime) {
                alert("–ù–µ–ª—å–∑—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ö–∞–∫ –≤ –ø—Ä–æ—à–ª–æ–º!");
                return;
            }

            let hack = {
                description: description,
                deadline: selectedTime,
                frozen: false
            };

            saveHack(hack);
            document.getElementById("hackDescription").value = "";
            document.getElementById("hackDeadline").value = "";
        }

        function saveHack(hack) {
            let hacks = JSON.parse(localStorage.getItem("hacks")) || [];
            hacks.push(hack);
            localStorage.setItem("hacks", JSON.stringify(hacks));
            loadHacks();
        }

        function loadHacks() {
            let hacks = JSON.parse(localStorage.getItem("hacks")) || [];
            let container = document.getElementById("activeHacks");
            container.innerHTML = "";

            hacks.forEach((hack, index) => {
                let timeLeft = hack.deadline - Date.now();
                let hours = Math.floor(timeLeft / (1000 * 60 * 60));
                let minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                let seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                let hackElement = document.createElement("div");
                hackElement.classList.add("hack-item");
                hackElement.innerHTML = `
                    <div>
                        <strong>${hack.description}</strong>
                        <span>${hours}:${minutes}:${seconds}</span>
                    </div>
                    <button onclick="deleteHack(${index})">üóë –£–¥–∞–ª–∏—Ç—å</button>
                `;

                container.appendChild(hackElement);
            });
        }

        function deleteHack(index) {
            let hacks = JSON.parse(localStorage.getItem("hacks")) || [];
            hacks.splice(index, 1);
            localStorage.setItem("hacks", JSON.stringify(hacks));
            loadHacks();
        }

        function goBack() {
            window.location.href = "index.html";
        }
    </script>
</body>
</html>